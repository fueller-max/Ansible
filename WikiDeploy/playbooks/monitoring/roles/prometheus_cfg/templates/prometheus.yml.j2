#
# Ansible managed
#
# http://prometheus.io/docs/operating/configuration/

global:
  scrape_interval: 15s
  scrape_timeout: 10s
  evaluation_interval: 15s

  external_labels:
    environment: monitor




rule_files:
  - /etc/prometheus/rules/*.yml
  - /etc/prometheus/rules/*.yaml
  - /etc/prometheus/rules/*.rules


scrape_configs:
  - job_name: prometheus
    metrics_path: /metrics
    static_configs:
    - targets:
      - prometheus:9090

  #  ---- Node Exporters for all nodes
  - job_name: firewall_ne
    static_configs:
    - targets: [ "{{ firewall_ne }}"]

  - job_name: loadbalancer_ne
    static_configs:
    - targets: [ "{{ loadbalancer_ne }}"]

  - job_name: backend1_ne
    static_configs:
    - targets: [ "{{ backend1_ne }}"]

  - job_name: backend2_ne
    static_configs:
    - targets: [ "{{ backend2_ne }}"]

  - job_name: db1_ne
    static_configs:
    - targets: [ "{{ db1_ne }}"]

  - job_name: db2_ne
    static_configs:
    - targets: [ "{{ db2_ne }}"]  

  - job_name: prometheus_ne
    static_configs:
    - targets: [ "{{ prometheus_ne }}"]
               
  - job_name: loki_ne
    static_configs:
    - targets: [ "{{ loki_ne }}"]  
 # ------------------------------------------

 # ---- Nginx Exporter for Load balancer
  - job_name: loadbalancer_nge
    static_configs:
    - targets: [ "{{ loadbalancer_nge }}"] 
 # ------------------------------------------

 # ---- Postgres Exporter for DB nodes 
  - job_name: db1_pge
    static_configs:
    - targets: [ "{{ db1_pge }}"] 

  - job_name: db2_pge
    static_configs:
    - targets: [ "{{ db2_pge }}"]  
  # -----------------------------------------       


scrape_config_files:
  - scrape_configs/*
